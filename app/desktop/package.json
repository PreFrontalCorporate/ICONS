// app/desktop/package.json
{
  "name":       "icon-desktop",
  "productName": "icon",                 // ← lowercase name shown to users
  "version":    "1.0.7",
  "description": "Overlay sticker client for Icon Suite",
  "author":     "PreFrontal Corporate",
  "private":    true,
  "type":       "module",
  "main":       "dist/main.js",

  "scripts": {
    "dev":   "electronmon . --ignore=packages/stickers",
    "build": "tsc -p tsconfig.main.json",
    "dist":  "electron-builder --publish=never"
  },

  "dependencies": {
    "@google-cloud/firestore": "7.11.3",
    "electron-updater":        "^5.3.0",
    "jsonwebtoken":            "^9.0.2",
    "ws":                      "^8.18.3"
  },

  "devDependencies": {
    "@types/node":      "^20.10.5",
    "electron":         "^29.4.6",
    "electron-builder": "^24.13.3",
    "electronmon":      "^2.0.0",
    "typescript":       "^5.4.4"
  },

  "build": {
    "icon": "build/icon",                // uses build/icon.png|ico|icns
    "electronDownload": { "mirror": "https://npmmirror.com/mirrors/electron/" },

    "files": [
      "dist/**/*",
      "windows/**/*",
      "build/icon.*",
      "packages/stickers/**/*"
    ],

    "mac":   { "target": [ "dmg",  "zip" ],
               "category": "public.app-category.graphics-design" },

    "win":   { "target": [
                 { "target": "nsis",      "arch": [ "x64", "ia32", "arm64" ] },
                 { "target": "portable",  "arch": [ "x64" ] }
               ]},

    "linux": { "target": [
                 "AppImage", "deb", "rpm", "snap"
               ]},

    "publish": {       /* workflow uploads manually – keep for future */
      "provider": "github",
      "owner":    "PreFrontalCorporate",
      "repo":     "icon"
    }
  }
}
